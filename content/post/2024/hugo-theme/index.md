---

title: "å…³äºåšå®¢çš„æ ·å¼æ”¹é€ "
slug: "Hugo Theme"
description: "è®²è§£äº†é¦–é¡µçš„æ¬¢è¿æ¨ªå¹…ã€ç½®é¡¶æ–‡ç« â€¦â€¦"
date: "2024-11-21T12:08:45+08:00"
lastmod: "2024-11-21T12:08:45+08:00"
image: ""
math: 
license: 
hidden: false
draft: false 
categories: ["å»ºç«™"]
tags: ["hugo"]
reaction: true
top: true
weight: -98

---

## å¼•è¨€

- æœ¬åšå®¢ä½¿ç”¨äº†[stackä¸»é¢˜ | hugo](https://github.com/rento666/My-Blog-By-Hugo-stack)ï¼ŒåŸGitHubä»“åº“ä¸º[Hugo-stack-theme-mod | GitHub](https://github.com/Mantyke/Hugo-stack-theme-mod)

- å¦‚æœä½ çš„**Hugoç‰ˆæœ¬**æ˜¯é«˜äº**2022å¹´**å‘å¸ƒçš„ï¼Œç›´æ¥è¿è¡Œæºä»“åº“ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºå…¶ä¸­éƒ¨åˆ†å‡½æ•°æ–¹æ³•å·²ç»å¼ƒç”¨ï¼Œä¿®æ”¹è¯·å‚è€ƒï¼šå°†æŠ¥é”™åŸå› å‘é€ç»™AIï¼Œæ ¹æ®AIæç¤ºé”™è¯¯æ¥ä¿®æ”¹ï¼Œè¿™é‡Œç”±äºæˆ‘ä¿®æ”¹æ—¶æ²¡æˆªå›¾ï¼Œæš‚æ—¶æ— æ³•å±•ç¤ºã€‚

- å¦‚æœä½¿ç”¨[æˆ‘çš„åšå®¢ä»“åº“ä»£ç ](https://github.com/rento666/My-Blog-By-Hugo-stack)ï¼Œè¯·å°†æˆ‘çš„æ–‡ç« å…¨éƒ¨åˆ é™¤åï¼Œå†æ·»åŠ ä½ è‡ªå·±çš„æ–‡ç« ã€‚åŒæ—¶éœ€è¦æ›¿æ¢æ‰€æœ‰å‡ºç°çš„`å½©è™¹å…”`ã€`caihongtu`ä¹‹ç±»çš„è¯è¯­ã€‚

## é¦–é¡µçš„æ¬¢è¿æ¨ªå¹…

> 2025å¹´10æœˆ14æ—¥æ›´æ–°ï¼ŒåŸŸåå·²ç»æ›´æ”¹ä¸º`caihongtu.top`

é¢„è§ˆï¼š
![æ¬¢è¿æ¨ªå¹…](https://s2.loli.net/2024/11/21/XhInQYoesvJf1N3.png)

ç”±äºé¡¹ç›®æ˜¯éƒ¨ç½²åœ¨Cloudflareä¸Šçš„ï¼Œæ‰€ä»¥é‚£ä¸ª**æ°¸ä¹…åŸŸå**å¤§æ¦‚ä¸ä¼šè¿‡æœŸï¼ˆ~~é™¤éCloudflareå€’é—­~~ï¼‰ï¼Œä½†æ˜¯**å½“å‰åŸŸå**å¯å°±ä¸ä¸€å®šäº†ï¼Œå› ä¸ºæˆ‘æƒ³è¦æ³¨å†Œçš„**caihongtu.com**ç›®å‰è¢«äººæ³¨å†Œäº†ï¼Œæ‰€ä»¥å…ˆæ³¨å†Œäº†è¿™ä¸ª`caihongtu.asia`ï¼Œç­‰é‚£ä¸ª`com`åŸŸåå¯ä»¥æ³¨å†Œäº†ï¼Œæˆ‘ä¼šç«‹é©¬å‡ºæ‰‹çš„ã€‚ï¼ˆåˆ«é—®ä¸ºä»€ä¹ˆä¸å»æ‰¾å¯¹æ–¹ä¹°ï¼Œå› ä¸ºæ²¡ğŸ’°ï¼‰

### ä¿®æ”¹ä»£ç 

- åšå®¢çš„æ ¹ç›®å½•æ–°å»º`layouts`æ–‡ä»¶å¤¹ï¼ˆé»˜è®¤å°±æœ‰ï¼Œæ²¡æœ‰çš„è¯æ‰‹åŠ¨åˆ›å»ºï¼‰ï¼Œä¹‹åå°†`./themes/hugo-theme-stack/layouts/index.html`ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°åˆšåˆšåˆ›å»ºçš„layoutsæ–‡ä»¶å¤¹å†…ï¼ˆå¦‚æœè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æœ¬æ¥å°±æœ‰å¯¹åº”æ–‡ä»¶ï¼Œåˆ™æ— é¡»å¤åˆ¶ï¼‰ï¼Œä¹‹åå†åœ¨`index.html`ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

{{% spoiler "ç‚¹æˆ‘æŸ¥çœ‹ä»£ç " %}}
```html
{{ define "main" }} {{ $pages := where .Site.RegularPages "Type" "in"
.Site.Params.mainSections }} {{ $notHidden := where .Site.RegularPages
"Params.hidden" "!=" true }} {{ $filtered := ($pages | intersect $notHidden) }}
{{ $pag := .Paginate ($filtered) }}

<!-- é¦–é¡µæ¬¢è¿å­—å¹…æ¿å— -->
<div class="welcome">
  <p style="font-size: 2rem; text-align: center; font-weight: bold">
    <span class="shake">{{ T "welcome.emoji" }}</span>
    <span class="jump-text1"> {{ T "welcome.msg1" }} </span>
    <span class="jump-text2"> {{ T "welcome.msg2" }} </span>
    <span id="site-title-static" style="color: #e99312">{{ .Site.Title }}</span>
    <span id="site-title" style="display: none; color: #e99312"></span>
  </p>
  <p style="font-size: 1.5rem; text-align: center; font-weight: bold">
    <span
      >{{ T "welcome.currentText" }}:
      <a href="{{ .Site.BaseURL }}"
        >{{ .Site.BaseURL | strings.TrimPrefix "http://" | strings.TrimPrefix
        "https://" | strings.TrimSuffix "/" }}</a
      ></span
    >&emsp;&emsp;
    <span
      >{{ T "welcome.permanentText" }}:
      <a href="https://cai-hong-tu-blog.pages.dev"
        >cai-hong-tu-blog.pages.dev</a
      ></span
    >
  </p>
</div>
<script type="module">
  // åŠ¨æ€ç”Ÿæˆå­—ç¬¦å’Œæ ·å¼
  document.addEventListener("DOMContentLoaded", () => {
    const title = "{{ .Site.Title }}"; // è·å– Hugo å˜é‡
    const titleContainer = document.getElementById("site-title");
    const staticTitle = document.getElementById("site-title-static");

    // åŠ¨æ€æ·»åŠ å­—ç¬¦åˆ° #site-title
    title.split("").forEach((char, index) => {
      const span = document.createElement("span");
      span.textContent = char;
      span.className = `jump-text jump-text${index}`;
      titleContainer.appendChild(span);
    });

    // åŠ¨æ€ç”Ÿæˆ CSS åŠ¨ç”»è§„åˆ™
    const styleSheet = document.styleSheets[0];
    title.split("").forEach((_, index) => {
      const delay = (index * 0.1).toFixed(1); // æ¯ä¸ªå­—ç¬¦å»¶è¿Ÿ 0.1s
      const rule = `
        .jump-text${index} {
          display: inline-block;
          animation: jump 0.5s 1;
          animation-delay: ${delay}s;
        }
      `;
      styleSheet.insertRule(rule, styleSheet.cssRules.length);
      staticTitle.style.display = "none";
      titleContainer.style.display = "inline";
    });
  });
</script>
<!-- ------é¦–é¡µæ¬¢è¿å­—å¹…æ¿å—------ -->

<section class="article-list">
  {{ range $index, $element := $pag.Pages }} {{ partial "article-list/default" .
  }} {{ end }}
</section>
<script type="module">
  import { commentCount } from "https://unpkg.com/@waline/client@v3/dist/comment.js";

  commentCount({
    serverURL: "{{.Site.Params.comments.waline.serverURL}}",
  });
</script>

{{- partial "pagination.html" . -}} {{- partial "footer/footer" . -}} {{ end }}
{{ define "right-sidebar" }} {{ partial "sidebar/right.html" . }} {{ end }}

```
{{% /spoiler %}}
 
- ä¸Šé¢æ˜¯æˆ‘çš„`index.html`æ‰€æœ‰çš„ä»£ç ï¼Œä½ åªéœ€è¦å…³æ³¨â€œé¦–é¡µæ¬¢è¿å­—å¹…æ¿å—â€å³å¯ã€‚

ä¸‹é¢æ˜¯æ¨ªå¹…çš„cssæ ·å¼ï¼Œç›®å½•åœ¨`./assets/scss/custom.scss`ä¸­
{{% spoiler "ç‚¹æˆ‘æŸ¥çœ‹ä»£ç " %}}
```
//---------------------------------------------------------
//é¦–é¡µæ¬¢è¿æ¿å—æ ·å¼
.welcome {
  color: var(--card-text-color-main);
  background: var(--card-background);
  box-shadow: var(--shadow-l2);
  border-radius: 30px;
  display: inline-block;
}

// ğŸ‘‹emojiå®ç°æ‘†åŠ¨æ•ˆæœ
.shake {
  display: inline-block;
  animation: shake 1s;
  animation-duration: 1s;
  animation-timing-function: ease;
  animation-delay: 0s;
  animation-iteration-count: 1;
  animation-direction: normal;
  animation-fill-mode: none;
  animation-play-state: running;
  animation-name: shake;
  animation-timeline: auto;
  animation-range-start: normal;
  animation-range-end: normal;
  animation-delay: 2s;
  @keyframes shake {
    0% {
      transform: rotate(0);
    }
    25% {
      transform: rotate(45deg) scale(1.2);
    }
    50% {
      transform: rotate(0) scale(1.2);
    }
    75% {
      transform: rotate(45deg) scale(1.2);
    }
    100% {
      transform: rotate(0);
    }
  }
}
// å®ç°å­—ç¬¦è·³åŠ¨åŠ¨ç”»
.jump-text1 {
  display: inline-block;
  animation: jump 0.5s 1;
}

.jump-text2 {
  display: inline-block;
  animation: jump 0.5s 1;
  animation-delay: 0.1s;
}

@keyframes jump {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-20px);
  }
  100% {
    transform: translateY(0);
  }
}
```
{{% /spoiler %}}


## æ–‡ç« ç½®é¡¶åŠŸèƒ½ï¼ˆæ”¯æŒå¤šä¸ªç½®é¡¶ï¼‰

é¢„è§ˆï¼š
![ç½®é¡¶æ–‡ç« ](https://s2.loli.net/2025/08/16/PTnSfqptNZCXQuz.png)

æœ‰æ—¶å€™ä¸å¾—ä¸æ‰¿è®¤ï¼Œæ—©æœŸå†™çš„æ–‡ç« è¿˜æ˜¯ä¼šç»å¸¸æ‹¿å‡ºæ¥çœ‹çš„ï¼Œæ‰€ä»¥ä¾¿æ‰“ç®—è‡ªå·±å†™ä¸€ä¸ªç½®é¡¶åŠŸèƒ½ã€‚

ä¸€å¼€å§‹é¢„æƒ³çš„æ˜¯åœ¨æ–‡ç« çš„å¤´éƒ¨`Front Matter`å†™ä¸Šä¸€ä¸ªè‡ªå®šä¹‰çš„`top`ï¼Œä¸º`true`æ—¶åˆ™ç½®é¡¶ï¼Œåä¹‹åˆ™ä¸ç½®é¡¶ã€‚

ä¿®æ”¹ä»£ç è¿‡ç¨‹ä¸­å‘ç°ï¼Œå¯ä»¥åœ¨æ¯ç¯‡æ–‡ç« å¤„å†™ä¸Šweightã€‚

ä¸¤è€…å„æœ‰åˆ©å¼Šï¼Œä¸‹é¢åˆ†äº«ä¸€ä¸‹ä¸¤ç§ç½®é¡¶çš„æ–¹æ³•ã€‚åœ¨æœ€åï¼Œæˆ‘å°†ä¸¤è€…ç¨å¾®æ•´åˆäº†ä¸€ä¸‹ã€‚

> æ¸©é¦¨æç¤ºï¼šå¦‚æœä½ èµ¶æ—¶é—´ï¼Œè¯·ç›´æ¥çœ‹æœ€ç»ˆç‰ˆï¼ï¼ï¼

### ä½¿ç”¨è‡ªå®šä¹‰topå±æ€§

åœ¨æ–‡ç« ä¸­æ·»åŠ è¿™ä¸ªtopï¼š
![æ·»åŠ äº†topå±æ€§](https://s2.loli.net/2025/08/16/GR5ZXMHqB7ylvbV.png)

é¦–å…ˆéœ€è¦ææ˜ç™½çš„æ˜¯ï¼Œæˆ‘ä»¬æƒ³è¾¾æˆçš„æ•ˆæœï¼š`åœ¨é¦–é¡µï¼Œæ–‡ç« åˆ—è¡¨éœ€è¦å°†å½“å‰é¡µçš„ç½®é¡¶æ–‡ç« æ”¾åˆ°æœ€å‰é¢ï¼Œå¹¶ä¸”æœ‰è§’æ ‡æ ‡æ³¨ã€‚`

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å…¶æ‹†åˆ†ä¸ºä¸¤ä»¶äº‹å»åšã€‚

#### 1.ç½®é¡¶æ–‡ç« æ¸²æŸ“

å·²çŸ¥`layouts/index.html`ä¸ºé¦–é¡µçš„htmlæ¨¡æ¿ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹è¿™é‡Œé¢çš„ä»£ç å³å¯ã€‚

å¦‚æœä½ ç†Ÿæ‚‰goä¸­htmlçš„æ¨¡æ¿ï¼Œé‚£ä¹ˆä½ ä¸€å®šèƒ½çœ‹å¾—æ‡‚ä¸‹é¢ä»£ç ã€‚

ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œç®€å•æ¥è¯´ï¼Œç°åœ¨ä½ å·²ç»æœ‰äº†ç½®é¡¶æ–‡ç« `topPages`å’Œæ­£å¸¸æ–‡ç« `normalPages`ï¼


{{% spoiler "ç‚¹æˆ‘æŸ¥çœ‹ä»£ç " %}}
```html
<!-- ä¿®æ”¹å‰ -->
{{ define "main" }} 
{{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }} 
{{ $notHidden := where .Site.RegularPages "Params.hidden" "!=" true }} 
{{ $filtered := ($pages | intersect $notHidden) }}
{{ $pag := .Paginate ($filtered) }}

<!-- ä¿®æ”¹å -->
{{ define "main" }} 
{{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }} 
{{ $topPages := where $pages "Params.top" true }}
{{ $normalPages := where $pages "Params.top" false }}
{{ $pag := .Paginate ($normalPages) }}
```
{{% /spoiler %}}

> å°å£°é€¼é€¼ï¼Œè¿™ä¸ª`pag`ç»è¿‡`.Paginate`åˆ†é¡µä¹‹åï¼Œå°±å˜å›äº†æ­£å¸¸çš„åˆ†é¡µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`pag`ä¸­åŒ…å«ç€ç½®é¡¶æ–‡ç« ï¼è€Œè¿™ä¸ªåœ¨æˆ‘ä»¬åé¢æ˜¯æ˜æ˜¾ä¸éœ€è¦çš„ï¼<br>
> å¹¶ä¸”ï¼Œæˆ‘ä¹Ÿå°è¯•è¿‡å°†`topPages`å’Œ`normalPages`åˆå¹¶åï¼Œå†è¿›è¡Œ`.Paginate`åˆ†é¡µï¼Œä½†æœ€ç»ˆç»“æœä¸å…¶ä¸€è‡´ï¼

åæ­£æ˜¯ä¸€é¡¿æ“ä½œè¿‡åï¼Œä¸‹é¢çš„æ¸²æŸ“å†™æˆäº†è¿™æ ·ï¼š

{{% spoiler "ç‚¹æˆ‘æŸ¥çœ‹ä»£ç " %}}
```html
<!-- è¿™ä¸ªæ˜¯åŸæ¥çš„ -->
<section class="article-list">
  {{ range $index, $element := $pag.Pages }} {{ partial "article-list/default" .
  }} {{ end }}
</section>

<!-- åˆ†å‰²çº¿ -->

<!-- è¿™ä¸ªæ˜¯æˆ‘æ”¹äº†ä¹‹åçš„ -->
<section class="article-list">
  {{ range $index, $element := $topPages }} {{ partial "article-list/default" .
  }} {{ end }}
</section>
<section class="article-list">
  {{ range $index, $element := $pag.Pages }} 
    {{ if not .Params.top }}
      {{ partial "article-list/default" . }}
    {{ end }}
  {{ end }}
</section>
```
{{% /spoiler %}}

#### 2.ç½®é¡¶è§’æ ‡

> Q: å¦‚ä½•å¯»æ‰¾ä¸»é¡µåˆ—è¡¨æ˜¯å“ªä¸ªhtmlæ¸²æŸ“çš„ï¼Ÿ<br>
> A: æˆ‘ä»¬å¯ä»¥åœ¨`index.html`ä¸­çœ‹åˆ°è¿™æ®µä»£ç ï¼š`{{ partial "article-list/default" . }}`ï¼Œè¿™ä¸ªå°±è¯´æ˜éœ€è¦å¯»æ‰¾`article-list/default.html`

æ‰€ä»¥ï¼Œ`layouts\partials\article-list\default.html`ä¸ºä¸»é¡µçš„æ¸²æŸ“åˆ—è¡¨ï¼Œç„¶åæ‰“å¼€ä¼šå‘ç°ï¼Œå®ƒå…¶å®æ˜¯æ¸²æŸ“äº†æ–‡ç« çš„`header`éƒ¨åˆ†(`layouts\partials\article\components\header.html`)ã€‚

- éœ€è¦æ³¨æ„ï¼Œåœ¨`header.html`ä¸­ï¼Œå¦‚æœä½¿ç”¨`.IsHome`æ¥åˆ¤æ–­æ˜¯å¦å¤„äºé¦–é¡µï¼Œå…¶ç»“æœæ°¸è¿œä¸º`false`ï¼Œå› ä¸ºè¿™ä¸ª`.`æ²¡æœ‰ä»£è¡¨ç€æ ¹é¡µé¢ï¼Œå®ƒæ˜¯æ–‡ç« é¡µé¢çš„ä¸€éƒ¨åˆ†ï¼

é‚£ä¹ˆæ— æ³•åˆ¤æ–­æ˜¯å¦åœ¨é¦–é¡µï¼Œè¿™ä¸ªå’‹åŠï¼Ÿä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Ÿä¸è¡Œï¼è¿™æ ·éœ€è¦ä¿®æ”¹çš„é¡µé¢å°±å¤šäº†ï¼Œå…¶ä»–ç”¨åˆ°headerçš„éƒ½è¦åŠ ä¸Šè¿™ä¸ªå‚æ•°ã€‚

äºæ˜¯æˆ‘è‹¦æ€å†¥æƒ³ï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ç§åŠæ³•ï¼Œé‚£å°±æ˜¯**COPYä¸€ä»½header.htmlï¼Œé‡å‘½åä¸ºheader-top.html**

ç„¶åè®©`article-list/default.html`æ¥æ¸²æŸ“`header-top.html`å°±è¡Œäº†ï¼

æœ€ç»ˆ`header-top.html`ä»£ç å¦‚ä¸‹ï¼š

{{% spoiler "ç‚¹æˆ‘æŸ¥çœ‹ä»£ç " %}}
```html
<header class="article-header">
    {{- $image := partialCached "helper/image" (dict "Context" . "Type" "article") .RelPermalink "article" -}}
      {{ if $image.exists }}

        <!-- æ–°å¢ä»£ç å¦‚ä¸‹ -->
        <div class="article-image">
          {{ if .Params.top }}
            <span class="top-badge">ç½®é¡¶</span>
          {{ end }}
        </div>
        <!-- æ–°å¢ä»£ç å¦‚ä¸Š -->

        <!-- ä»¥ä¸‹ä»£ç æœªåŠ¨ -->
        <a>...</a>
        <!-- ä»¥ä¸Šä»£ç æœªåŠ¨ -->
    {{ end }}
    {{ partialCached "article/components/details" . .RelPermalink }}
</header>
```
{{% /spoiler %}}

CSSä»£ç å°±éœ€è¦å†™åˆ°`assets\scss\partials\article.scss`ä¸­ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„`.article-list article .article-image`,ç„¶åå¡«å…¥ä»£ç ã€‚

![CSSå¡«å…¥ä½ç½®](https://s2.loli.net/2025/08/16/YmZogktbLzCGAKv.png)

{{% spoiler "ç‚¹æˆ‘æŸ¥çœ‹ä»£ç " %}}
```scss
position: relative;
.top-badge {
    position: absolute;
    left: 10;
    top: 10;
    background: #e43;
    color: #fff;
    padding: 6px 30px;
    font-size: 1.5rem;
    font-weight: 700;
    transform: rotate(-35deg)translate(-20px,0px);
    box-shadow: 0 2px 8px rgba(0,0,0,.15);
    z-index: 2;
    border-top-left-radius: 6px;
    border-bottom-right-radius: 6px;
    pointer-events: none;
    user-select: none;
}
```
{{% /spoiler %}}

åˆ°æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼

#### ç¼ºç‚¹

ä½†æ˜¯è¿™æ ·å†™æœ‰ä¸ªåå¤„ï¼Œå°±æ˜¯ç½®é¡¶çš„æ²¡æœ‰å‚ä¸åˆ†é¡µã€‚

æ‰“ä¸ªæ¯”æ–¹è¯´ï¼Œç°åœ¨æˆ‘ä»¬åœ¨`config`ä¸­è®¾ç½®çš„åˆ†é¡µæ•°é‡ä¸º`5`ï¼Œä¸€å…±`10`ç¯‡æ–‡ç« ï¼Œå…¶ä¸­`å3ç¯‡`å…¨éœ€è¦ç½®é¡¶ã€‚

é‚£ä¹ˆç¬¬ä¸€é¡µæ˜¯æ­£å¸¸æ˜¾ç¤º5ç¯‡æ–‡ç« ï¼Œç¬¬äºŒé¡µåˆ™æ˜¯ä¼šæ˜¾ç¤º`3+5=8ç¯‡`æ–‡ç« ï¼

### ä½¿ç”¨weightå±æ€§

å¦‚æœå¸Œæœ›ç½®é¡¶çš„æ–‡ç« ä¹Ÿå‚ä¸åˆ†é¡µï¼Œé‚£ä¹ˆå¯ä»¥çœ‹ä¸€çœ‹è¿™ç§æ–¹æ³•ã€‚

> Hugoä¸­é»˜è®¤å°±æœ‰weightå±æ€§ï¼Œå¹¶ä¸”åˆ†é¡µæ—¶ä¼šè‡ªåŠ¨è®¡ç®—ï¼Œæ‰€ä»¥æ— éœ€å…¶ä»–å¤šä½™æ“ä½œã€‚

åªéœ€è¦åœ¨æ–‡ç« çš„`Front Matter`ä¸­æ·»åŠ ä¸Š`weight: éé›¶æ•´æ•°`å³å¯ï¼

![image.png](https://s2.loli.net/2025/08/16/fpg1QSkAZRi5JlM.png)

- è¯·æ³¨æ„ï¼Œè‹¥ä¸å†™`weight`ï¼Œåˆ™é»˜è®¤è§†ä¸º`0`ï¼Œå¹¶ä¸”æ•°å­—è¶Šå¤§ï¼Œæ–‡ç« è¶Šé åã€‚

- æ‰€ä»¥ï¼Œæ•°å­—è¶Šå°ï¼ˆè´Ÿæ•´æ•°ï¼‰ï¼Œæ’åè¶Šé å‰ï¼Œä¹Ÿå°±æ˜¯ç­‰æ•ˆäºâ€œç½®é¡¶â€æ•ˆæœäº†ã€‚

è€Œæ­¤æ—¶çš„`header-top.html`ï¼Œåˆ™éœ€è¦æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼š

```html
{{ if lt .Params.weight -10 }}
    <span class="top-badge">ç½®é¡¶</span>
{{ end }}
```

ä¸Šé¢ä»£ç æ˜¯åˆ¤æ–­`weight`å°äº`-10`æ—¶ï¼Œæ‰ä¼šæœ‰ç½®é¡¶è§’æ ‡ã€‚

#### ä¼˜ç¼ºç‚¹

ä½¿ç”¨weightçš„ä¼˜ç‚¹å°±æ˜¯`ç½®é¡¶æ–‡ç« ä¹Ÿå‚ä¸åˆ°åˆ†é¡µä¸­äº†ï¼Œè¿›å…¥ç¬¬äºŒé¡µï¼Œåˆ™ç¬¬ä¸€é¡µçš„ç½®é¡¶æ–‡ç« æ¶ˆå¤±`

ä½†ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œéœ€è¦è®°ä½è‡ªå·±å¡«å†™çš„è¿™ä¸ªåˆ¤æ–­èŒƒå›´ï¼Œå¦‚æœè¶…å‡ºäº†è¿™ä¸ªèŒƒå›´ï¼Œå¯èƒ½è§’æ ‡ä¸ä¼šç”Ÿæ•ˆã€‚

é‚£ä¹ˆå°±ä¼šæœ‰äººé—®äº†ï¼Œç…®æ³¢ç…®æ³¢ï¼Œæœ‰æ²¡æœ‰æ—¢è®©ç½®é¡¶æ–‡ç« åŠ å…¥åˆ†é¡µï¼Œåˆä¸ç”¨è®°è¿™ä¸ªèŒƒå›´çš„æ–¹æ³•å‘¢ï¼Ÿæˆ‘çš„å›ç­”æ˜¯ï¼Œæœ‰çš„ï¼Œå…„å¼Ÿï¼Œæœ‰çš„ã€‚

### top + weight ç»„åˆï¼ˆæœ€ç»ˆç‰ˆï¼‰

åˆ©ç”¨weightæ¥å¯¹æ–‡ç« åˆ—è¡¨æ¸²æŸ“è¿›è¡Œæ’åºï¼Œåˆ©ç”¨topæ¥æ§åˆ¶è§’æ ‡çš„æ˜¾éšï¼Œåº”è¯¥æ˜¯æœ€ä¼˜è§£äº†ã€‚

![æ—¢æœ‰topï¼Œåˆæœ‰weight](https://s2.loli.net/2025/08/16/XDAe54vFuwKSYyz.png)

`layouts\index.html`ä¿æŒåŸä»£ç ä¸å˜ï¼Œå¤åˆ¶`layouts\partials\article\components\header.html`ä¸€ä»½ï¼Œä¿®æ”¹åç§°ä¸º`header-top.html`ï¼Œè·¯å¾„å¦‚ä¸‹:`layouts\partials\article\components\header-top.html`

`header-top.html`ä»£ç å¦‚ä¸‹ï¼š
```html
<header class="article-header">
    {{- $image := partialCached "helper/image" (dict "Context" . "Type" "article") .RelPermalink "article" -}}
    {{ if $image.exists }}
        <div class="article-image">
            {{ if .Params.top }}
                <span class="top-badge">ç½®é¡¶</span>
            {{ end }}
            <a href="{{ .RelPermalink }}">
                {{ if $image.resource }}
                    {{- $Permalink := $image.resource.RelPermalink -}}
                    {{- $Width := $image.resource.Width -}}
                    {{- $Height := $image.resource.Height -}}
                    {{- $Srcset := "" -}}
                    
                    {{- if (default true .Page.Site.Params.imageProcessing.cover.enabled) -}}
                        {{- $thumbnail := $image.resource.Resize "800x" -}}
                        {{- $thumbnailRetina := $image.resource.Resize "1600x" -}}
                        {{- $Srcset = printf "%s 800w, %s 1600w" $thumbnail.RelPermalink $thumbnailRetina.RelPermalink -}}
                        {{- $Permalink = $thumbnail.RelPermalink -}}
                        {{- $Width = $thumbnail.Width -}}
                        {{- $Height = $thumbnail.Height -}}
                    {{- end -}}

                    <img src="{{ $Permalink }}"
                        {{ with $Srcset }}srcset="{{ . }}"{{ end }}
                        width="{{ $Width }}" 
                        height="{{ $Height }}" 
                        loading="lazy"
                        alt="Featured image of post {{ .Title }}" />
                {{ else }}
                    <img src="{{ $image.permalink }}" loading="lazy" alt="Featured image of post {{ .Title }}" />
                {{ end }}
            </a>
        </div>
    {{ end }}

    {{ partialCached "article/components/details" . .RelPermalink }}
</header>
```

ä¿®æ”¹`layouts\partials\article-list\default.html`æ–‡ä»¶ï¼Œç”¨ä»¥æ¸²æŸ“`header-top.html`ï¼š

```html
{{ $image := partialCached "helper/image" (dict "Context" . "Type" "articleList") .RelPermalink "articleList" }}
<article class="{{ if $image.exists }}has-image{{ end }}">
    {{ partial "article/components/header-top" . }}
</article>
```

åˆ°è¿™é‡Œï¼Œç½®é¡¶æ•ˆæœå°±ç»“æŸäº†ï¼Œå¦‚æœåç»­æœ‰å…¶ä»–æ–¹æ³•ï¼Œæˆ‘ä¼šæ›´æ–°åˆ°ä¸‹é¢ã€‚


## é™„å½•

### å‚è€ƒ

- [ğŸ‰é¦–é¡µæ·»åŠ æ¬¢è¿æ¨ªå¹… - linsnowåšå®¢](https://linsnow.cn/posts/bloglab/hugo-stack/modify-hugo/)

- [Weight - Hugo Docs](https://gohugo.io/methods/page/weight/)

- [if - Hugo Docs](https://hugo.opendocs.io/zh-cn/functions/go-template/if/)

### ç‰ˆæƒä¿¡æ¯

æœ¬æ–‡åŸè½½äº [å½©è™¹å…”ã®åšå®¢](https://cai-hong-tu-blog.pages.dev/)ï¼Œéµå¾ª CC BY-NC-SA 4.0 åè®®ï¼Œå¤åˆ¶è¯·ä¿ç•™åŸæ–‡å‡ºå¤„ã€‚
